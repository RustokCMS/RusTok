# ============================================================================
# RusToK Development Environment Configuration
# ============================================================================
# Copy this file to .env.dev and adjust values as needed
# Usage: docker compose --env-file .env.dev -f docker-compose.yml -f docker-compose.full-dev.yml up

# ============================================================================
# Database Configuration
# ============================================================================
POSTGRES_DB=rustok_dev
POSTGRES_USER=rustok
POSTGRES_PASSWORD=rustok
DATABASE_URL=postgres://rustok:rustok@db:5432/rustok_dev

# ============================================================================
# Server Configuration (Loco Backend)
# ============================================================================
SERVER_HOST=0.0.0.0
SERVER_PORT=5150
RUST_LOG=debug
JWT_SECRET=dev_secret_change_in_production_please_use_strong_random_string
REFRESH_TOKEN_SECRET=dev_refresh_secret_change_in_production

# ============================================================================
# Frontend Configuration (Shared)
# ============================================================================
# API Base URL (from browser perspective)
NEXT_PUBLIC_API_URL=http://localhost:5150
NEXT_PUBLIC_GRAPHQL_ENDPOINT=/api/graphql
NEXT_PUBLIC_AUTH_BASE_URL=/api/auth

# Default tenant for dev (optional)
NEXT_PUBLIC_DEFAULT_TENANT_SLUG=demo

# ============================================================================
# Next.js Admin Configuration
# ============================================================================
# Port for Next.js admin panel
ADMIN_NEXT_PORT=3000

# ============================================================================
# Leptos Admin Configuration
# ============================================================================
# Port for Leptos admin panel
ADMIN_LEPTOS_PORT=3001
RUSTOK_API_URL=http://localhost:5150
RUSTOK_GRAPHQL_ENDPOINT=/api/graphql
RUSTOK_AUTH_BASE_URL=/api/auth

# ============================================================================
# Next.js Storefront Configuration
# ============================================================================
STOREFRONT_NEXT_PORT=3100

# ============================================================================
# Leptos Storefront Configuration
# ============================================================================
STOREFRONT_LEPTOS_PORT=3101

# ============================================================================
# Feature Flags (Optional)
# ============================================================================
ENABLE_BILLING_MODULE=false
ENABLE_FORUM_MODULE=true
ENABLE_BLOG_MODULE=true
ENABLE_COMMERCE_MODULE=true

# ============================================================================
# Observability (Optional)
# ============================================================================
# Sentry DSN for error tracking (leave empty to disable)
SENTRY_DSN=

# Enable debug panel in dev
ENABLE_DEBUG_PANEL=true

# ============================================================================
# Email Configuration (Optional, for auth)
# ============================================================================
SMTP_HOST=mailhog
SMTP_PORT=1025
SMTP_FROM=noreply@rustok.local

# ============================================================================
# Redis Configuration (Optional, for caching)
# ============================================================================
REDIS_URL=redis://redis:6379/0

# ============================================================================
# Default SuperAdmin Configuration
# ============================================================================
# Default SuperAdmin Configuration
# ============================================================================
# A SuperAdmin is created automatically on first startup (idempotent).
# Three ways to supply the password — choose the one that fits your env:
#
# OPTION A — DEV ONLY: plain env var (never use in production)
SUPERADMIN_EMAIL=admin@example.com
SUPERADMIN_PASSWORD=change-me-in-production   # dev only!
SUPERADMIN_TENANT_SLUG=default
SUPERADMIN_TENANT_NAME=Default Workspace
#
# OPTION B — PRODUCTION: Docker / Kubernetes secret mounted as a file
#   docker secret create superadmin_password <(printf 's3cr3t')
#   SUPERADMIN_EMAIL=admin@example.com
#   SUPERADMIN_PASSWORD_FILE=/run/secrets/superadmin_password
#   (unset SUPERADMIN_PASSWORD)
#
# OPTION C — CI/CD / cloud providers (GitHub Actions, AWS ECS, Fly.io …)
#   Inject SUPERADMIN_EMAIL and SUPERADMIN_PASSWORD at runtime via the
#   platform's secret store. Remove the vars from any committed file.
#
# After the first successful start the password var can be removed entirely —
# the initializer is idempotent and will not recreate an existing user.
#
# Alternatively, skip the initializer entirely and use the CLI task:
#   cargo loco task --name create_superadmin \
#       --args "email=admin@example.com password=s3cr3t"

# ============================================================================
# Seed Data Configuration (legacy / dev convenience aliases)
# ============================================================================
# Used by `cargo loco db seed` (dev/test seeds).
# SUPERADMIN_* vars above take priority over these.
SEED_ADMIN_EMAIL=admin@local
SEED_ADMIN_PASSWORD=admin12345
SEED_TENANT_SLUG=demo
SEED_TENANT_NAME=Demo Workspace
